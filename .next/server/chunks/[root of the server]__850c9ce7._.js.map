{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file://C%3A/FPT%20Polytechnic/frame2/frame2/src/app/api/users/%5Bid%5D/route.ts"],"sourcesContent":["import { readFile, writeFile } from \"fs/promises\";\r\nimport path from \"path\";\r\n\r\nconst filePath = path.join(process.cwd(), \"src\", \"data\", \"users.json\");\r\n\r\n// GET user\r\nexport async function GET(_: Request, context: { params: { id: string } }) {\r\n  const id = Number(context.params.id);\r\n  const data = await readFile(filePath, \"utf-8\");\r\n  const users = JSON.parse(data);\r\n  const user = users.find((u: any) => u.id === id);\r\n\r\n  if (!user) {\r\n    return new Response(JSON.stringify({ error: \"Không tìm thấy user\" }), { status: 404 });\r\n  }\r\n\r\n  return new Response(JSON.stringify(user), { status: 200 });\r\n}\r\n\r\n// PUT (cập nhật user)\r\nexport async function PUT(req: Request, context: { params: { id: string } }) {\r\n  const id = Number(context.params.id);\r\n  const updatedData = await req.json();\r\n\r\n  try {\r\n    const data = await readFile(filePath, \"utf-8\");\r\n    const users = JSON.parse(data);\r\n\r\n    const index = users.findIndex((u: any) => u.id === id);\r\n    if (index === -1) {\r\n      return new Response(JSON.stringify({ error: \"Không tìm thấy user\" }), { status: 404 });\r\n    }\r\n\r\n    users[index] = { ...users[index], ...updatedData };\r\n    await writeFile(filePath, JSON.stringify(users, null, 2), \"utf-8\");\r\n\r\n    return new Response(JSON.stringify(users[index]), { status: 200 });\r\n  } catch (error) {\r\n    return new Response(JSON.stringify({ error: \"Lỗi server\" }), { status: 500 });\r\n  }\r\n}\r\n\r\n// DELETE user\r\nexport async function DELETE(_: Request, context: { params: { id: string } }) {\r\n  const id = Number(context.params.id);\r\n\r\n  try {\r\n    const data = await readFile(filePath, \"utf-8\");\r\n    let users = JSON.parse(data);\r\n\r\n    const index = users.findIndex((u: any) => u.id === id);\r\n    if (index === -1) {\r\n      return new Response(JSON.stringify({ error: \"Không tìm thấy user\" }), { status: 404 });\r\n    }\r\n\r\n    users.splice(index, 1);\r\n    await writeFile(filePath, JSON.stringify(users, null, 2), \"utf-8\");\r\n\r\n    return new Response(JSON.stringify({ message: \"Xoá thành công\" }), { status: 200 });\r\n  } catch (error) {\r\n    return new Response(JSON.stringify({ error: \"Lỗi server\" }), { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;AAEA,MAAM,WAAW,iGAAA,CAAA,UAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,QAAQ;AAGlD,eAAe,IAAI,CAAU,EAAE,OAAmC;IACvE,MAAM,KAAK,OAAO,QAAQ,MAAM,CAAC,EAAE;IACnC,MAAM,OAAO,MAAM,CAAA,GAAA,qHAAA,CAAA,WAAQ,AAAD,EAAE,UAAU;IACtC,MAAM,QAAQ,KAAK,KAAK,CAAC;IACzB,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;IAE7C,IAAI,CAAC,MAAM;QACT,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO;QAAsB,IAAI;YAAE,QAAQ;QAAI;IACtF;IAEA,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,OAAO;QAAE,QAAQ;IAAI;AAC1D;AAGO,eAAe,IAAI,GAAY,EAAE,OAAmC;IACzE,MAAM,KAAK,OAAO,QAAQ,MAAM,CAAC,EAAE;IACnC,MAAM,cAAc,MAAM,IAAI,IAAI;IAElC,IAAI;QACF,MAAM,OAAO,MAAM,CAAA,GAAA,qHAAA,CAAA,WAAQ,AAAD,EAAE,UAAU;QACtC,MAAM,QAAQ,KAAK,KAAK,CAAC;QAEzB,MAAM,QAAQ,MAAM,SAAS,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;QACnD,IAAI,UAAU,CAAC,GAAG;YAChB,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;gBAAE,OAAO;YAAsB,IAAI;gBAAE,QAAQ;YAAI;QACtF;QAEA,KAAK,CAAC,MAAM,GAAG;YAAE,GAAG,KAAK,CAAC,MAAM;YAAE,GAAG,WAAW;QAAC;QACjD,MAAM,CAAA,GAAA,qHAAA,CAAA,YAAS,AAAD,EAAE,UAAU,KAAK,SAAS,CAAC,OAAO,MAAM,IAAI;QAE1D,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG;YAAE,QAAQ;QAAI;IAClE,EAAE,OAAO,OAAO;QACd,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO;QAAa,IAAI;YAAE,QAAQ;QAAI;IAC7E;AACF;AAGO,eAAe,OAAO,CAAU,EAAE,OAAmC;IAC1E,MAAM,KAAK,OAAO,QAAQ,MAAM,CAAC,EAAE;IAEnC,IAAI;QACF,MAAM,OAAO,MAAM,CAAA,GAAA,qHAAA,CAAA,WAAQ,AAAD,EAAE,UAAU;QACtC,IAAI,QAAQ,KAAK,KAAK,CAAC;QAEvB,MAAM,QAAQ,MAAM,SAAS,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;QACnD,IAAI,UAAU,CAAC,GAAG;YAChB,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;gBAAE,OAAO;YAAsB,IAAI;gBAAE,QAAQ;YAAI;QACtF;QAEA,MAAM,MAAM,CAAC,OAAO;QACpB,MAAM,CAAA,GAAA,qHAAA,CAAA,YAAS,AAAD,EAAE,UAAU,KAAK,SAAS,CAAC,OAAO,MAAM,IAAI;QAE1D,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,SAAS;QAAiB,IAAI;YAAE,QAAQ;QAAI;IACnF,EAAE,OAAO,OAAO;QACd,OAAO,IAAI,SAAS,KAAK,SAAS,CAAC;YAAE,OAAO;QAAa,IAAI;YAAE,QAAQ;QAAI;IAC7E;AACF","debugId":null}}]
}