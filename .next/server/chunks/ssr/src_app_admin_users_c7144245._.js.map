{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/admin/users/adUsers.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"deleteBtn\": \"adUsers-module__R9E8eG__deleteBtn\",\n  \"editBtn\": \"adUsers-module__R9E8eG__editBtn\",\n  \"formGroup\": \"adUsers-module__R9E8eG__formGroup\",\n  \"userContainer\": \"adUsers-module__R9E8eG__userContainer\",\n  \"userTable\": \"adUsers-module__R9E8eG__userTable\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file://C%3A/FPT%20Polytechnic/frame2/frame2/src/app/admin/users/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport styles from \"./adUsers.module.css\";\r\n\r\ninterface User {\r\n  id?: number | string;\r\n  name: string;\r\n  username: string;\r\n  password: string;\r\n  role: string;\r\n}\r\n\r\nexport default function AdminUsers() {\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [form, setForm] = useState<User>({\r\n    name: \"\",\r\n    username: \"\",\r\n    password: \"\",\r\n    role: \"\",\r\n  });\r\n  const [editId, setEditId] = useState<number | string | null>(null);\r\n  const [error, setError] = useState<string>(\"\");\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      const res = await fetch(\"/api/users\");\r\n      const data = await res.json();\r\n      setUsers(data);\r\n    } catch (err) {\r\n      console.error(\"Lỗi tải danh sách người dùng\", err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const handleChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\r\n  ) => {\r\n    const { name, value } = e.target;\r\n    setForm({ ...form, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n\r\n    const method = editId ? \"PUT\" : \"POST\";\r\n    const url = editId ? `/api/users/${editId}` : \"/api/users\";\r\n\r\n    try {\r\n      const res = await fetch(url, {\r\n        method,\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(form),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setError(data?.error || \"Có lỗi xảy ra khi lưu.\");\r\n        return;\r\n      }\r\n\r\n      // Cập nhật lại danh sách & reset form\r\n      fetchUsers();\r\n      setForm({ name: \"\", username: \"\", password: \"\", role: \"\" });\r\n      setEditId(null);\r\n    } catch (err) {\r\n      console.error(\"Lỗi gửi dữ liệu:\", err);\r\n      setError(\"Không thể kết nối server.\");\r\n    }\r\n  };\r\n\r\n  const handleEdit = (user: User) => {\r\n    setForm({ ...user, password: \"\" }); // không hiện mật khẩu cũ\r\n    setEditId(user.id ?? null);\r\n  };\r\n\r\n  const handleDelete = async (id?: number | string) => {\r\n    if (!id) return;\r\n    try {\r\n      await fetch(`/api/users/${id}`, { method: \"DELETE\" });\r\n      fetchUsers();\r\n    } catch (err) {\r\n      console.error(\"Lỗi khi xóa người dùng:\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.userContainer}>\r\n      <h1>Quản lý người dùng</h1>\r\n\r\n      <form className={styles.formGroup} onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          placeholder=\"Tên người dùng\"\r\n          value={form.name}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"username\"\r\n          placeholder=\"Tài khoản\"\r\n          value={form.username}\r\n          onChange={handleChange}\r\n          required\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Mật khẩu\"\r\n          value={form.password}\r\n          onChange={handleChange}\r\n          required={!editId}\r\n        />\r\n        <select\r\n          name=\"role\"\r\n          value={form.role}\r\n          onChange={handleChange}\r\n          required\r\n        >\r\n          <option value=\"\">-- Chọn vai trò --</option>\r\n          <option value=\"admin\">Admin</option>\r\n          <option value=\"user\">User</option>\r\n        </select>\r\n        <button type=\"submit\">{editId ? \"Cập nhật\" : \"Thêm\"}</button>\r\n      </form>\r\n\r\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n\r\n      <table className={styles.userTable}>\r\n        <thead>\r\n          <tr>\r\n            <th>ID</th>\r\n            <th>Tên</th>\r\n            <th>Tài khoản</th>\r\n            <th>Vai trò</th>\r\n            <th>Hành động</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {users.map((user) => (\r\n            <tr key={user.id?.toString()}>\r\n              <td>{user.id}</td>\r\n              <td>{user.name}</td>\r\n              <td>{user.username}</td>\r\n              <td>{user.role}</td>\r\n              <td>\r\n                <button\r\n                  onClick={() => handleEdit(user)}\r\n                  className={styles.editBtn}\r\n                >\r\n                  Sửa\r\n                </button>\r\n                <button\r\n                  onClick={() => handleDelete(user.id)}\r\n                  className={styles.deleteBtn}\r\n                >\r\n                  Xóa\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}