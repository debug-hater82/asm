BÁO CÁO PHÂN TÍCH LOGIC NGHIỆP VỤ VÀ QUAN HỆ CƠ SỞ DỮ LIỆU (ERD)
============================================================

1. User (Người dùng)
---------------------
- Lưu thông tin đăng nhập, cá nhân, phân quyền (role: customer/admin).
- Quan hệ:
  + 1 User có thể có nhiều Address (địa chỉ giao hàng).
  + 1 User có thể có 1 Cart (giỏ hàng).
  + 1 User có thể có nhiều Order (đơn hàng).
  + 1 User có thể có nhiều Review (đánh giá sản phẩm).
  + 1 User có thể có nhiều ReturnRequest (yêu cầu trả hàng).

2. Address (Địa chỉ giao hàng)
------------------------------
- Lưu thông tin địa chỉ nhận hàng của User.
- Quan hệ: Mỗi Address thuộc về 1 User (userId là FK).

3. Cart (Giỏ hàng)
-------------------
- Lưu các sản phẩm mà User đang chọn mua nhưng chưa đặt hàng.
- Quan hệ:
  + Mỗi Cart thuộc về 1 User (userId là FK).
  + Cart chứa nhiều sản phẩm (Product) qua items (không FK trực tiếp, chỉ tham chiếu).

4. Order (Đơn hàng)
--------------------
- Lưu thông tin đơn hàng đã đặt, gồm các sản phẩm, tổng tiền, trạng thái, voucher, payment.
- Quan hệ:
  + Mỗi Order thuộc về 1 User (user là FK).
  + Mỗi Order có thể sử dụng 1 Voucher (voucher là FK).
  + Mỗi Order có thể có 1 Payment (payment là FK).
  + Order chứa nhiều sản phẩm (Product) qua items (không FK trực tiếp, chỉ tham chiếu).

5. ReturnRequest (Yêu cầu trả hàng/hoàn tiền)
---------------------------------------------
- Lưu các yêu cầu trả hàng của User cho 1 đơn hàng cụ thể.
- Quan hệ:
  + Mỗi ReturnRequest thuộc về 1 User (user là FK).
  + Mỗi ReturnRequest liên kết với 1 Order (order là FK).
  + Có thể liên kết với 1 Voucher (voucherApplied là FK).

6. Payment (Thanh toán)
------------------------
- Lưu thông tin thanh toán cho đơn hàng.
- Quan hệ: Mỗi Payment thuộc về 1 Order (order là FK).

7. Product (Sản phẩm)
----------------------
- Lưu thông tin sản phẩm, thuộc danh mục, có thể có nhiều biến thể (variant).
- Quan hệ:
  + Mỗi Product thuộc về 1 Category (category là FK).
  + 1 Product có thể có nhiều Review.
  + 1 Product có thể nằm trong nhiều Promotion.

8. Category (Danh mục sản phẩm)
-------------------------------
- Phân loại sản phẩm, hỗ trợ danh mục cha/con (parent là FK tự tham chiếu).
- Quan hệ: 1 Category có thể là cha của nhiều Category khác (parent là FK).

9. Review (Đánh giá sản phẩm)
-----------------------------
- Lưu đánh giá của User cho Product.
- Quan hệ:
  + Mỗi Review thuộc về 1 User (user là FK).
  + Mỗi Review thuộc về 1 Product (product là FK).

10. Promotion (Khuyến mãi)
--------------------------
- Lưu chương trình khuyến mãi, áp dụng cho nhiều Product.
- Quan hệ: 1 Promotion áp dụng cho nhiều Product (products[] là FK).

11. Voucher (Mã giảm giá)
--------------------------
- Lưu mã giảm giá, có thể áp dụng cho Order hoặc ReturnRequest.
- Quan hệ: 1 Voucher có thể được dùng trong nhiều Order, ReturnRequest.

12. News (Tin tức, thông báo)
-----------------------------
- Lưu tin tức, có thể liên kết với Promotion.
- Quan hệ: Mỗi News có thể liên kết với 1 Promotion (relatedPromotion là FK).

13. Banner (Banner quảng cáo)
-----------------------------
- Lưu banner hiển thị trên website, có thể liên kết tới sản phẩm hoặc category qua link (không FK cứng).

14. Tag (Nhãn sản phẩm)
------------------------
- Lưu các nhãn như “hot”, “sale”,... để gắn cho sản phẩm (không FK cứng).

Tổng kết luồng nghiệp vụ chính:
-------------------------------
- User đăng ký, đăng nhập, cập nhật thông tin cá nhân, thêm nhiều Address.
- User thêm sản phẩm vào Cart, tiến hành đặt Order.
- Order có thể áp dụng Voucher, thanh toán qua Payment.
- Sau khi nhận hàng, User có thể tạo Review cho Product hoặc gửi ReturnRequest nếu muốn trả hàng.
- Product được phân loại theo Category, có thể nằm trong nhiều Promotion.
- News và Banner phục vụ cho việc truyền thông, quảng bá.
